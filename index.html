<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Secret Tower</title>
    <link rel="stylesheet" href="/src/css/style.css" />
    <link rel="stylesheet" href="/src/css/stats.css" />
    <link rel="stylesheet" href="/src/css/shop.css" />
    <link rel="stylesheet" href="/src/css/prestige.css" />
    <link rel="stylesheet" href="/src/css/inventory.css" />
    <link rel="stylesheet" href="/src/css/skillTree.css" />
    <link rel="stylesheet" href="/src/css/statistics.css" />
    <link rel="stylesheet" href="/src/css/region.css" />
  </head>

  <body>
    <div class="game-container">
      <div class="resource-bar">
        <div class="resource resource-gold"><span class="icon">üí∞</span><span id="gold"></span></div>
        <div class="resource resource-crystal"><span class="icon">üíé</span><span id="crystals"></span></div>
        <div class="resource resource-souls"><span class="icon">üëª</span><span id="souls"></span></div>
        <!-- Cloud Save UI -->
        <div class="cloud-save-bar">
          <span id="cloud-save-status">Checking login...</span>
          <button id="cloud-save-btn" disabled>Save to Cloud</button>
          <button id="cloud-load-btn" disabled>Load from Cloud</button>
        </div>
      </div>

      <div class="tab-buttons">
        <button class="tab-btn active" data-tab="stats">Stats</button>
        <button class="tab-btn" data-tab="shop">Training</button>
        <button class="tab-btn" data-tab="prestige">Prestige</button>
        <button class="tab-btn" data-tab="inventory">Inventory</button>
        <button class="tab-btn hidden" data-tab="skilltree">Skill Tree</button>
        <button class="tab-btn" data-tab="options">Options</button>
      </div>

      <div class="main-content">
        <div class="game-panel">
          <div class="tab-content">
            <div id="stats" class="tab-panel active">
              <div class="stats-grid"></div>
            </div>

            <div id="shop" class="tab-panel">
              <div id="gold-upgrades" class="sub-tab-panel active">
                <div class="shop-grid"></div>
              </div>
            </div>

            <div id="prestige" class="tab-panel">
              <div class="prestige-container">
                <!-- TODO: fix when prestige works -->
                <!-- <div class="prestige-header">
                  <div class="damage-display">
                    <h3>damage</h3>
                    <div class="bonus">+${damageBonus}%</div>
                  </div>
                  <button id="prestige-btn" class="earned-souls-display">
                    <h3>Prestige for:</h3>
                    <div class="bonus">+${earnedSouls}</div>
                  </button>
                </div> -->

                <div class="prestige-upgrades-container">
                  <!-- Crystal upgrades will be inserted here -->
                </div>

                <div id="prestige-modal" class="modal">
                  <div class="modal-content">
                    <h2>Confirm Prestige</h2>
                    <p>Are you sure you want to prestige?</p>
                    <div class="souls-preview">
                      <span>You will earn:</span>
                      <div class="souls-amount">+<span id="modal-souls-amount">0</span> Souls</div>
                    </div>
                    <div class="warning">
                      You will lose your level, trainings and skill tree. <br />
                      <span style="color: rgb(79, 243, 79)"
                        >You will keep only inventory, souls and crystal upgrades.</span
                      >
                    </div>
                    <div class="modal-buttons">
                      <button id="cancel-prestige" class="modal-btn cancel">Cancel</button>
                      <button id="confirm-prestige" class="modal-btn confirm">Prestige</button>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <div id="inventory" class="tab-panel">
              <div class="equipment-container">
                <div class="equipment-layout">
                  <div class="equipment-slots">
                    <div class="equipment-slot" data-slot="head" title="Helmet Slot">
                      <div class="slot-indicator">ü™ñ</div>
                    </div>
                    <div class="equipment-slot" data-slot="amulet" title="Amulet Slot">
                      <div class="slot-indicator">üìø</div>
                    </div>
                    <div class="equipment-slot" data-slot="chest" title="Armor Slot">
                      <div class="slot-indicator">üëï</div>
                    </div>
                    <div class="equipment-slot" data-slot="belt" title="Belt Slot">
                      <div class="slot-indicator">üéóÔ∏è</div>
                    </div>
                    <div class="equipment-slot" data-slot="weapon" title="Weapon Slot">
                      <div class="slot-indicator">‚öîÔ∏è</div>
                    </div>
                    <div class="equipment-slot" data-slot="offhand" title="Shield/Offhand Slot">
                      <div class="slot-indicator">üõ°Ô∏è</div>
                    </div>
                    <div class="equipment-slot" data-slot="gloves" title="Gloves Slot">
                      <div class="slot-indicator">üß§</div>
                    </div>
                    <div class="equipment-slot" data-slot="ring1" title="Ring Slot">
                      <div class="slot-indicator">üíç</div>
                    </div>
                    <div class="equipment-slot" data-slot="legs" title="Pants Slot">
                      <div class="slot-indicator">üëñ</div>
                    </div>
                    <div class="equipment-slot" data-slot="ring2" title="Ring Slot">
                      <div class="slot-indicator">üíç</div>
                    </div>

                    <div class="equipment-slot" data-slot="boots" title="Boots Slot">
                      <div class="slot-indicator">üë¢</div>
                    </div>
                  </div>
                  <div class="character-preview">üë§</div>
                </div>
                <div class="salvage-container">
                  <!-- Add new buttons here -->
                  <div class="inventory-tabs">
                    <button id="items-tab" class="inventory-btn active">Items</button>
                    <button id="materials-tab" class="inventory-btn">Materials</button>
                  </div>
                  <button id="sort-inventory" class="inventory-btn">Sort Items</button>

                  <div class="salvage-dropdown">
                    <button class="salvage-btn">
                      Salvage
                      <span class="dropdown-icon">‚ñº</span>
                    </button>
                    <div class="salvage-options">
                      <div data-rarity="NORMAL">Normal Items</div>
                      <div data-rarity="MAGIC">Magic Items & Below</div>
                      <div data-rarity="RARE">Rare Items & Below</div>
                      <div data-rarity="UNIQUE">Unique Items & Below</div>
                      <div data-rarity="LEGENDARY">Legendary Items & Below</div>
                      <div data-rarity="MYTHIC">Mythic Items & Below</div>
                    </div>
                  </div>
                  <div class="inventory-trash">üóëÔ∏è</div>
                </div>
              </div>
              <div class="inventory-grid">
                <!-- Add a new grid for materials, hidden by default -->
                <div class="materials-grid" style="display: none">
                  <div class="materials-container"></div>
                </div>
                <div class="persistent-inventory">
                  <!-- 20 slots (5x4) grid will be generated here -->
                </div>
                <div class="grid-container"></div>
              </div>
            </div>

            <div id="skilltree" class="tab-panel">
              <div id="class-selection" class="class-selection">
                <!-- Will be populated by JavaScript -->
              </div>
              <div id="skill-tree-container" class="skill-tree-container hidden">
                <!-- Will show skill tree after class selection -->
              </div>
            </div>
            <div id="options" class="tab-panel">
              <div class="options-container">
                <div id="reset-modal" class="modal">
                  <div class="modal-content">
                    <h2>Reset Progress</h2>
                    <p>Are you sure you want to reset all progress? This cannot be undone!</p>
                    <div class="modal-buttons">
                      <button id="confirm-reset" class="danger-btn">Reset</button>
                      <button id="cancel-reset" class="secondary-btn">Cancel</button>
                    </div>
                  </div>
                </div>

                <button id="reset-progress" class="danger-button">Reset All Progress</button>

                <div class="options-section">
                  <h3>Statistics</h3>
                  <div class="stats-display">
                    <div id="stat-total-time-played"></div>
                    <div id="stat-time-played"></div>
                    <div id="stat-enemies-killed"></div>
                    <div id="stat-highest-damage"></div>
                    <div id="stat-total-gold"></div>
                    <div id="stat-items-found"></div>
                    <div id="stat-prestige-count"></div>
                    <div id="stat-highest-stage"></div>
                    <div id="stat-total-time-in-fights"></div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="character-panel">
          <div class="character-info">
            <div id="character-avatar">üõ°Ô∏è</div>
            <div class="character-resources">
              <div id="character-name"></div>
              <div class="character-hp-mana">
                <div class="life-bar">
                  <div id="life-fill"></div>
                  <div id="life-text" class="life-text">100/100</div>
                </div>
                <div class="mana-bar">
                  <div id="mana-fill" style="width: 100%"></div>
                  <div id="mana-text" class="mana-text">50/50</div>
                </div>
              </div>
            </div>
          </div>
          <div class="action-bar">
            <div class="skill-slots">
              <!-- Skills will be added dynamically -->
            </div>
          </div>
          <div class="character-controls">
            <button id="start-btn">Start</button>
            <div id="stage-display">Stage: 1</div>
          </div>

          <!-- REGION SELECTOR -->
          <div id="region-selector"></div>

          <div class="enemy-section">
            <div class="enemy-info-left">
              <h3 class="enemy-name"></h3>
              <div class="enemy-avatar">‚öîÔ∏è</div>
            </div>
            <div class="enemy-info-right">
              <div class="enemy-stats">
                <div class="enemy-damage">
                  <span class="stat-label">Damage:</span> <span class="stat-value" id="enemy-damage-value">0</span>
                </div>
                <!-- More stats can be added here in the future -->
              </div>
            </div>
            <div class="enemy-life-bar">
              <div id="enemy-life-fill" style="width: 100%"></div>
              <div id="enemy-life-text" class="life-text">50/50</div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="tooltip" class="tooltip hidden"></div>

    <script type="module" src="/src/main.js"></script>
  </body>
</html>
