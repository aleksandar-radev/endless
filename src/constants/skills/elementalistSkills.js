import { DEFAULT_MAX_SKILL_LEVEL, SKILL_LEVEL_TIERS } from '../../skillTree.js';
import { scaleDownFlat } from '../../common.js';

// Elementalist skills extracted from skills.js
export const ELEMENTALIST_SKILLS = {
  // Tier 1 Skills
  fireball: {
    id: 'fireball',
    name: () => 'Fireball',
    type: () => 'instant',
    manaCost: (level) => 2 + level * 0.25,
    cooldown: () => 5200,
    requiredLevel: () => SKILL_LEVEL_TIERS[0],
    icon: () => 'fireball',
    description: () => 'Launches a fireball that deals fire damage.',
    maxLevel: () => DEFAULT_MAX_SKILL_LEVEL,
    effect: (level) => ({
      fireDamage: level * 2,
      fireDamagePercent: 5 * scaleDownFlat(level),
    }),
  },
  frostArmor: {
    id: 'frostArmor',
    name: () => 'Frost Armor',
    type: () => 'buff',
    manaCost: (level) => 6 + level * 1.25,
    cooldown: () => 34000,
    duration: () => 10000,
    requiredLevel: () => SKILL_LEVEL_TIERS[0],
    icon: () => 'frost-armor',
    description: () => 'Encases the caster in frost, increasing armor.',
    maxLevel: () => DEFAULT_MAX_SKILL_LEVEL,
    effect: (level) => ({
      armor: level * 4,
      armorPercent: 3 * scaleDownFlat(level),
      coldDamagePercent: 2 * scaleDownFlat(level),
    }),
  },

  warmth: {
    id: 'warmth',
    name: () => 'Warmth',
    type: () => 'passive',
    requiredLevel: () => SKILL_LEVEL_TIERS[0],
    icon: () => 'storm',
    description: () => 'Increases mana and mana regeneration',
    maxLevel: () => 1000,
    effect: (level) => ({
      manaPercent: 2 * scaleDownFlat(level),
      manaRegen: level * 0.1,
      manaRegenPercent: 0.5 * scaleDownFlat(level),
      wisdomPercent: 0.5 * scaleDownFlat(level),
      wisdom: level * 2,
    }),
  },

  // Tier 10 Skills
  lightningStrike: {
    id: 'lightningStrike',
    name: () => 'Lightning Strike',
    type: () => 'instant',
    manaCost: (level) => 4 + level * 0.375,
    cooldown: () => 3000,
    requiredLevel: () => SKILL_LEVEL_TIERS[1],
    icon: () => 'lightning',
    description: () => 'Strikes an enemy with a bolt of lightning.',
    maxLevel: () => DEFAULT_MAX_SKILL_LEVEL,
    effect: (level) => ({
      lightningDamage: level * 5,
      lightningDamagePercent: 6 * scaleDownFlat(level),
      airDamagePercent: 2 * scaleDownFlat(level),
    }),
  },
  elementalMastery: {
    id: 'elementalMastery',
    name: () => 'Elemental Mastery',
    type: () => 'passive',
    requiredLevel: () => SKILL_LEVEL_TIERS[1],
    icon: () => 'elemental-mastery',
    description: () => 'Increases all elemental damage.',
    maxLevel: () => 200,
    effect: (level) => ({
      elementalDamagePercent: 0.75 * scaleDownFlat(level),
      elementalPenetration: level * 0.1,
      elementalPenetrationPercent: 0.2 * scaleDownFlat(level),
    }),
  },

  // Tier 25 Skills
  blizzard: {
    id: 'blizzard',
    name: () => 'Blizzard',
    type: () => 'buff',
    manaCost: (level) => 10 + level * 1.25,
    cooldown: () => 88000,
    duration: () => 40000,
    requiredLevel: () => SKILL_LEVEL_TIERS[2],
    icon: () => 'blizzard',
    description: () => 'Summons a blizzard, covering the battlefield in frost.',
    maxLevel: () => 100,
    effect: (level) => ({
      coldDamagePercent: 3 * scaleDownFlat(level),
      airDamagePercent: 3 * scaleDownFlat(level),
      waterDamagePercent: 3 * scaleDownFlat(level),
      lightningDamagePercent: 3 * scaleDownFlat(level),
      coldDamage: level * 3,
      airDamage: level * 3,
      waterDamage: level * 3,
      lightningDamage: level * 3,
    }),
  },
  fireShield: {
    id: 'fireShield',
    name: () => 'Fire Shield',
    type: () => 'buff',
    manaCost: (level) => 20 + level * 0.5,
    cooldown: () => 37000,
    duration: () => 15000,
    requiredLevel: () => SKILL_LEVEL_TIERS[2],
    icon: () => 'fire-shield',
    description: () => 'Surrounds the caster with a shield of fire. Deals only fire damage.',
    maxLevel: () => DEFAULT_MAX_SKILL_LEVEL,
    effect: (level) => ({
      reflectFireDamage: level * 18,
      fireDamagePercent: 2.5 * scaleDownFlat(level),
    }),
  },
  arcaneWisdom: {
    id: 'arcaneWisdom',
    name: () => 'Arcane Wisdom',
    type: () => 'passive',
    requiredLevel: () => SKILL_LEVEL_TIERS[2],
    icon: () => 'wisdom',
    description: () => 'Increases mana and mana regeneration.',
    maxLevel: () => 200,
    effect: (level) => ({
      manaPercent: 1.5 * scaleDownFlat(level),
      manaRegen: level * 0.2,
      manaRegenPercent: 0.5 * scaleDownFlat(level),
      manaRegenOfTotalPercent: Math.min(scaleDownFlat(level) * 0.005, 1),
    }),
  },

  // Tier 50 Skills
  elementalStorm: {
    id: 'elementalStorm',
    name: () => 'Elemental Storm',
    type: () => 'instant',
    manaCost: (level) => 50,
    cooldown: () => 4500,
    requiredLevel: () => SKILL_LEVEL_TIERS[3],
    icon: () => 'storm',
    description: () => 'Unleashes a storm of fire, ice, and lightning.',
    maxLevel: () => DEFAULT_MAX_SKILL_LEVEL,
    effect: (level) => ({
      elementalDamage: level * 2,
      elementalDamagePercent: scaleDownFlat(level),
    }),
  },
  elementalAffinity: {
    id: 'elementalAffinity',
    name: () => 'Elemental Affinity',
    type: () => 'passive',
    requiredLevel: () => SKILL_LEVEL_TIERS[3],
    icon: () => 'affinity',
    description: () => 'Increases resistance to elemental damage.',
    maxLevel: () => 1000,
    effect: (level) => ({
      elementalDamage: level * 0.5,
      elementalDamagePercent: 0.5 * scaleDownFlat(level),
      intelligencePercent: 0.5 * scaleDownFlat(level),
    }),
  },

  // Tier 75 Skills
  arcanePulse: {
    id: 'arcanePulse',
    name: () => 'Arcane Pulse',
    type: () => 'buff',
    manaCost: (level) => 30 + level * 0.75,
    cooldown: () => 51000,
    duration: () => 25000,
    requiredLevel: () => SKILL_LEVEL_TIERS[4],
    icon: () => 'pulse',
    description: () => 'Increases attack rating and resource stealing.',
    maxLevel: () => 200,
    effect: (level) => ({
      attackRating: level * 5,
      attackRatingPercent: 5 * scaleDownFlat(level),
      lifePerHit: level * 4,
      manaPerHit: level * 0.5,
      attackSpeed: level * 0.01,
    }),
  },

  // Tier 100 Skills
  elementalOverload: {
    id: 'elementalOverload',
    name: () => 'Elemental Overload',
    type: () => 'toggle',
    manaCost: (level) => 4 + level * 0.625,
    requiredLevel: () => SKILL_LEVEL_TIERS[5],
    icon: () => 'overload',
    description: () => 'Boosts elemental damage.',
    maxLevel: () => 600,
    effect: (level) => ({
      fireDamagePercent: 2 * scaleDownFlat(level),
      coldDamagePercent: 2 * scaleDownFlat(level),
      airDamagePercent: 2 * scaleDownFlat(level),
      lightningDamagePercent: 2 * scaleDownFlat(level),
    }),
  },
  primordialControl: {
    id: 'primordialControl',
    name: () => 'Primordial Control',
    type: () => 'passive',
    requiredLevel: () => SKILL_LEVEL_TIERS[5],
    icon: () => 'control',
    description: () => 'Grants control over elemental forces, increasing all stats.',
    maxLevel: () => 5000,
    effect: (level) => ({
      earthDamagePercent: 1.5 * scaleDownFlat(level),
      vitality: level * 5,
      vitalityPercent: 2 * scaleDownFlat(level),
      wisdomPercent: 2 * scaleDownFlat(level),
    }),
  },

  // Tier 200 Skills
  avatarOfTheElements: {
    id: 'avatarOfTheElements',
    name: () => 'Avatar of the Elements',
    type: () => 'passive',
    requiredLevel: () => SKILL_LEVEL_TIERS[6],
    icon: () => 'avatar-of-elements',
    description: () => 'Transforms the caster into a being of pure elemental power.',
    maxLevel: () => 100,
    effect: (level) => ({
      elementalDamagePercent: 1.5 * scaleDownFlat(level),
      elementalDamage: level * 2,
      allResistance: level * 0.25,
      perseverance: level * 5,
      perseverancePercent: 1.5 * scaleDownFlat(level),
    }),
  },

  // Tier 1200 Skills
  elementalMastery: {
    id: 'elementalMastery',
    name: () => 'Elemental Mastery',
    type: () => 'passive',
    requiredLevel: () => SKILL_LEVEL_TIERS[7],
    icon: () => 'elemental-mastery',
    description: () => 'Deepen your command of all elements.',
    maxLevel: () => DEFAULT_MAX_SKILL_LEVEL,
    effect: (level) => ({
      elementalDamagePercent: 2 * scaleDownFlat(level),
      elementalPenetrationPercent: 2 * scaleDownFlat(level),
      manaRegenPercent: scaleDownFlat(level),
    }),
  },
  volcanicWrath: {
    id: 'volcanicWrath',
    name: () => 'Volcanic Wrath',
    type: () => 'instant',
    manaCost: (level) => 25 + level * 1.25,
    cooldown: () => 100000,
    requiredLevel: () => SKILL_LEVEL_TIERS[7],
    icon: () => 'volcanic-wrath',
    description: () => 'Erupts fiery explosions around enemies.',
    maxLevel: () => DEFAULT_MAX_SKILL_LEVEL,
    effect: (level) => ({
      fireDamagePercent: 4 * scaleDownFlat(level),
      damage: level * 12,
    }),
  },

  // Tier 2000 Skills
  tempestNova: {
    id: 'tempestNova',
    name: () => 'Tempest Nova',
    type: () => 'instant',
    manaCost: (level) => 35 + level * 1.25,
    cooldown: () => 120000,
    requiredLevel: () => SKILL_LEVEL_TIERS[8],
    icon: () => 'tempest-nova',
    description: () => 'Summons a massive storm of elemental energy.',
    maxLevel: () => DEFAULT_MAX_SKILL_LEVEL,
    effect: (level) => ({
      lightningDamagePercent: 4 * scaleDownFlat(level),
      coldDamagePercent: 4 * scaleDownFlat(level),
      damage: level * 15,
    }),
  },
  earthShatter: {
    id: 'earthShatter',
    name: () => 'Earth Shatter',
    type: () => 'instant',
    manaCost: (level) => 30 + level * 1.25,
    cooldown: () => 130000,
    requiredLevel: () => SKILL_LEVEL_TIERS[8],
    icon: () => 'earth-shatter',
    description: () => 'Cracks the earth dealing heavy damage.',
    maxLevel: () => DEFAULT_MAX_SKILL_LEVEL,
    effect: (level) => ({
      earthDamagePercent: 4 * scaleDownFlat(level),
      damage: level * 14,
      armorPenetrationPercent: 2 * scaleDownFlat(level),
    }),
  },

  // Tier 3000 Skills
  tidalWave: {
    id: 'tidalWave',
    name: () => 'Tidal Wave',
    type: () => 'buff',
    manaCost: (level) => 40 + level * 1.25,
    cooldown: () => 10000,
    duration: () => 30000,
    requiredLevel: () => SKILL_LEVEL_TIERS[9],
    icon: () => 'tidal-wave',
    description: () => 'Unleash a giant wave washing away enemies.',
    maxLevel: () => DEFAULT_MAX_SKILL_LEVEL,
    effect: (level) => ({
      waterDamagePercent: 5 * scaleDownFlat(level),
      reduceEnemyAttackSpeedPercent: level * 0.1,
    }),
  },
  stormLord: {
    id: 'stormLord',
    name: () => 'Storm Lord',
    type: () => 'passive',
    requiredLevel: () => SKILL_LEVEL_TIERS[9],
    icon: () => 'storm-lord',
    description: () => 'Command storms with ease.',
    maxLevel: () => DEFAULT_MAX_SKILL_LEVEL,
    effect: (level) => ({
      lightningDamagePercent: 5 * scaleDownFlat(level),
      elementalDamage: level * 3,
      manaPercent: 1.5 * scaleDownFlat(level),
    }),
  },

  // Tier 5000 Skills
  elementalAscension: {
    id: 'elementalAscension',
    name: () => 'Elemental Ascension',
    type: () => 'passive',
    requiredLevel: () => SKILL_LEVEL_TIERS[10],
    icon: () => 'elemental-ascension',
    description: () => 'Transcend normal limits of elemental power.',
    maxLevel: () => DEFAULT_MAX_SKILL_LEVEL,
    effect: (level) => ({
      elementalDamagePercent: 1 * scaleDownFlat(level),
      elementalPenetrationPercent: 1 * scaleDownFlat(level),
      allResistance: level * 0.4,
    }),
  },
  natureCataclysm: {
    id: 'natureCataclysm',
    name: () => 'Nature Cataclysm',
    type: () => 'instant',
    manaCost: (level) => 50 + level * 1.25,
    cooldown: () => 180000,
    requiredLevel: () => SKILL_LEVEL_TIERS[10],
    icon: () => 'nature-cataclysm',
    description: () => 'Unleashes catastrophic elemental forces.',
    maxLevel: () => DEFAULT_MAX_SKILL_LEVEL,
    effect: (level) => ({
      fireDamagePercent: 5 * scaleDownFlat(level),
      coldDamagePercent: 5 * scaleDownFlat(level),
      lightningDamagePercent: 5 * scaleDownFlat(level),
      damage: level * 25,
    }),
  },
};
